{"version":3,"sources":["common/components/atexo-charts.component.ts"],"names":["AtexoChartsJs","AtexoChartsJs.constructor","AtexoChartsJs.ngOnInit","AtexoChartsJs.ngOnDestroy","AtexoChartsJs.ngAfterViewInit","AtexoChartsJs.data","AtexoChartsJs.chartType","AtexoChartsJs.colours","AtexoChartsJs.setLegend","AtexoChartsJs.getColour","AtexoChartsJs.getRandomInt","AtexoChartsJs.rgba","AtexoChartsJs.click","AtexoChartsJs.hover","AtexoChartsJs.getChartBuilder","AtexoChartsJs.getDataObject","AtexoChartsJs.getChartData","AtexoChartsJs.refresh"],"mappings":"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","file":"common/components/atexo-charts.component.js","sourcesContent":["import {Component, Directive, View, ElementRef, Input, Inject, Attribute, EventEmitter} from 'angular2/core';\r\nimport {CORE_DIRECTIVES, FORM_DIRECTIVES, NgClass} from 'angular2/common';\r\nimport {RouteParams} from 'angular2/router';\r\nimport {HTTP_PROVIDERS, Http, RequestOptions, Request, Response, RequestMethod} from 'angular2/http';\r\n\r\ndeclare var Chart:any;\r\n\r\n@Component({\r\n    selector: 'panel-body-charts-js',\r\n    properties: [\r\n        'data',\r\n        'labels',\r\n        'series',\r\n        'colours',\r\n        'chartType',\r\n        'legend',\r\n        'options'\r\n    ]\r\n})\r\n\r\n@View({\r\n    template: '<div class=\"canvas-wrap atexo-canvas-wrap\"><canvas class=\"canvas atexo-canvas-chart\" height=\"50%\"></canvas></div>'\r\n})\r\n\r\nexport class AtexoChartsJs {\r\n\r\n    private canvas:HTMLCanvasElement;\r\n    private ctx:CanvasRenderingContext2D;\r\n    private cvs:any;\r\n    private parent:any;\r\n    private chart:any;\r\n    private _data:Array<any> = [];\r\n    private labels:Array<any> = [];\r\n    private options:any = {responsive: true};\r\n    private _chartType:string;\r\n    private series:Array<any> = [];\r\n    private _colours:Array<any> = [];\r\n    private legend:boolean;\r\n    private legendTemplate:any;\r\n    private initFlag:boolean = false;\r\n    private chartClick:EventEmitter<any> = new EventEmitter();\r\n    private chartHover:EventEmitter<any> = new EventEmitter();\r\n    private defaultsColours:Array<any> = [\r\n        {\r\n            fillColor: 'rgba(151,187,205,0.2)',\r\n            strokeColor: 'rgba(151,187,205,1)',\r\n            pointColor: 'rgba(151,187,205,1)',\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: 'rgba(151,187,205,0.8)',\r\n            color: 'rgba(151,187,205,1)',\r\n            highlight: 'rgba(151,187,205,0.8)'\r\n        }, {\r\n            fillColor: 'rgba(220,220,220,0.2)',\r\n            strokeColor: 'rgba(220,220,220,1)',\r\n            pointColor: 'rgba(220,220,220,1)',\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: 'rgba(220,220,220,0.8)',\r\n            color: 'rgba(220,220,220,1)',\r\n            highlight: 'rgba(220,220,220,0.8)'\r\n        }, {\r\n            fillColor: 'rgba(247,70,74,0.2)',\r\n            strokeColor: 'rgba(247,70,74,1)',\r\n            pointColor: 'rgba(247,70,74,1)',\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: 'rgba(247,70,74,0.8)',\r\n            color: 'rgba(247,70,74,1)',\r\n            highlight: 'rgba(247,70,74,0.8)'\r\n        }, {\r\n            fillColor: 'rgba(70,191,189,0.2)',\r\n            strokeColor: 'rgba(70,191,189,1)',\r\n            pointColor: 'rgba(70,191,189,1)',\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: 'rgba(70,191,189,0.8)',\r\n            color: 'rgba(70,191,189,1)',\r\n            highlight: 'rgba(70,191,189,0.8)'\r\n        }, {\r\n            fillColor: 'rgba(253,180,92,0.2)',\r\n            strokeColor: 'rgba(253,180,92,1)',\r\n            pointColor: 'rgba(253,180,92,1)',\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: 'rgba(253,180,92,0.8)',\r\n            color: 'rgba(253,180,92,1)',\r\n            highlight: 'rgba(253,180,92,0.8)'\r\n        }, {\r\n            fillColor: 'rgba(148,159,177,0.2)',\r\n            strokeColor: 'rgba(148,159,177,1)',\r\n            pointColor: 'rgba(148,159,177,1)',\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: 'rgba(148,159,177,0.8)',\r\n            color: 'rgba(148,159,177,1)',\r\n            highlight: 'rgba(148,159,177,0.8)'\r\n        }, {\r\n            fillColor: 'rgba(77,83,96,0.2)',\r\n            strokeColor: 'rgba(77,83,96,1)',\r\n            pointColor: 'rgba(77,83,96,1)',\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: 'rgba(77,83,96,0.8)',\r\n            color: 'rgba(77,83,96,1)',\r\n            highlight: 'rgba(77,83,96,0.8)'\r\n        }];\r\n\r\n    constructor(private element:ElementRef) {\r\n        this.element = element;\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n        //this.canvas = <HTMLCanvasElement> document.getElementById('myChart');\r\n        this.canvas = <HTMLCanvasElement> this.element.nativeElement.children[0].children[0];\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this.parent = this.element.nativeElement;\r\n        this.refresh();\r\n        this.initFlag = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.chart) {\r\n            this.chart.destroy();\r\n            this.chart = null;\r\n        }\r\n        if (this.legendTemplate) {\r\n            this.legendTemplate.destroy();\r\n            this.legendTemplate = null;\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        return true;\r\n    }\r\n\r\n    // private get data\r\n\r\n    private get data() {\r\n        return this._data;\r\n    }\r\n\r\n    // private set data\r\n\r\n    private set data(value) {\r\n        this._data = value;\r\n        if (this.initFlag && this._data && this._data.length > 0) {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    // private get chartType\r\n\r\n    private get chartType() {\r\n        return this._chartType;\r\n    }\r\n\r\n    //private set chartType\r\n\r\n    private set chartType(value) {\r\n        this._chartType = value;\r\n        if (this.initFlag && this._chartType && this._chartType.length > 0) {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    // private get colours\r\n\r\n    private get colours() {\r\n        return this._colours;\r\n    }\r\n\r\n    // private set colours\r\n\r\n    private set colours(value) {\r\n        this._colours = value;\r\n        if (this.initFlag && this._chartType && this._chartType.length > 0) {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    setLegend() {\r\n        let list = this.parent.getElementsByTagName('ul');\r\n        if (list.length) {\r\n            list[0].remove();\r\n            this.parent.insertAdjacentHTML('beforeend', this.chart.generateLegend());\r\n        } else {\r\n            this.parent.insertAdjacentHTML('beforeend', this.chart.generateLegend());\r\n        }\r\n    }\r\n\r\n    getColour(colour:Array<number>):any {\r\n        return {\r\n            fillColor: this.rgba(colour, 0.2),\r\n            strokeColor: this.rgba(colour, 1),\r\n            pointColor: this.rgba(colour, 1),\r\n            pointStrokeColor: '#fff',\r\n            pointHighlightFill: '#fff',\r\n            pointHighlightStroke: this.rgba(colour, 0.8),\r\n            color: this.rgba(colour, 1),\r\n            highlight: this.rgba(colour, 0.8)\r\n        };\r\n    }\r\n\r\n    getRandomInt(min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    }\r\n\r\n    rgba(colour, alpha) {\r\n        return 'rgba(' + colour.concat(alpha).join(',') + ')';\r\n    }\r\n\r\n    public click(evt) {\r\n        console.log('xxxx');\r\n        let atEvent = this.chart.getPointsAtEvent || this.chart.getBarsAtEvent || this.chart.getSegmentsAtEvent;\r\n        let activePoints = atEvent.call(this.chart, evt);\r\n        if (activePoints.length > 0) {\r\n            let activeLabel = activePoints[0].label;\r\n            this.chartClick.emit({activePoints: activePoints, activeLabel: activeLabel});\r\n        } else {\r\n            console.log('not point');\r\n        }\r\n\r\n    }\r\n\r\n    public hover(evt) {\r\n        let atEvent = this.chart.getPointsAtEvent || this.chart.getBarsAtEvent || this.chart.getSegmentsAtEvent;\r\n        let activePoints = atEvent.call(this.chart, evt);\r\n        if (activePoints.length > 0) {\r\n            let activeLabel = activePoints[0].label;\r\n            let activePoint = activePoints[0].value;\r\n            this.chartHover.emit({activePoints: activePoints, activePoint: activePoint, activeLabel: activeLabel});\r\n        } else {\r\n            console.log('not point');\r\n        }\r\n    }\r\n\r\n    getChartBuilder(ctx:any, data:Array<any>, options:any) {\r\n        return new Chart(ctx)[this.chartType](data, options);\r\n    }\r\n\r\n    getDataObject(label:string, value:any):any {\r\n        if (this.chartType === 'Line'\r\n            || this.chartType === 'Bar'\r\n            || this.chartType === 'Radar') {\r\n            return {\r\n                label: label,\r\n                data: value\r\n            };\r\n        }\r\n\r\n        if (this.chartType === 'Pie'\r\n            || this.chartType === 'Doughnut'\r\n            || this.chartType === 'PolarArea') {\r\n            return {\r\n                label: label,\r\n                value: value\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getChartData(labels:any, dataObject:any) {\r\n        if (this.chartType === 'Line'\r\n            || this.chartType === 'Bar'\r\n            || this.chartType === 'Radar') {\r\n            return {\r\n                labels: labels,\r\n                datasets: dataObject\r\n            };\r\n        }\r\n        if (this.chartType === 'Pie'\r\n            || this.chartType === 'Doughnut'\r\n            || this.chartType === 'PolarArea') {\r\n            return dataObject;\r\n        }\r\n\r\n    }\r\n\r\n    private refresh() {\r\n\r\n        this.ngOnDestroy();\r\n        let dataset:Array<any> = [];\r\n\r\n        for (let i = 0; i < this.data.length; i++) {\r\n\r\n            let colourDesc:Array<number> = [this.getRandomInt(0, 255), this.getRandomInt(0, 255), this.getRandomInt(0, 255)];\r\n            let colour = i < this.colours.length ? this.colours[i] : this.defaultsColours[i] || this.getColour(colourDesc);\r\n\r\n            let data:any = (<any>Object).assign(colour,\r\n                this.getDataObject(this.series[i] || this.labels[i], this.data[i]));\r\n\r\n            dataset.push(data);\r\n\r\n        }\r\n        let data:any = this.getChartData(this.labels, dataset);\r\n\r\n        this.chart = this.getChartBuilder(this.ctx, data, this.options);\r\n\r\n        if (this.legend) {\r\n            this.setLegend();\r\n        }\r\n    }\r\n\r\n}"],"sourceRoot":"/source/"}